<ul class="nav">
  <li>
    <%= link_to "Postit!", root_path, :class => 'brand' %>
  </li>
</ul>

<div class="nav_item btn-group pull-left">
  <%= link_to '#', class: 'btn dropdown-toggle btn-warning', 'data-toggle' => 'dropdown' do %>
    Categories <span class="caret"></span>
  <% end %>
  <ul class="dropdown-menu">
    <% Category.all.sort{|a,b| a.name <=> b.name }.each do |category| %>
      <li><%= link_to category.name, category_path(category) %>
    <% end %>
    <% if logged_in? %> <!-- Hide New Category button if not logged in -->
      <li role="separator" class="divider"></li>
      <li>
        <%= link_to(new_category_path) do %>
          <i class="icon-plus"></i>
          New Category
        <% end %>
      </li>
    <% end %>
  </ul>
</div>

<% if logged_in? %>  <!-- Hide New Post button if not logged in -->
  <div class="nav_item pull-left">
    <%= link_to 'New Post', new_post_path, class: "btn btn-success" %>
  </div>
  <div class="nav_item btn-group pull-right">
    <button class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
    <%= current_user.username %>
      <span class="caret"></span>
    </button>
    <ul class="dropdown-menu">
      <li><%= link_to raw("<i class='icon-pencil'></i> edit profile"), edit_user_path(current_user) %></li>
      <li><%= link_to raw("<i class='icon-user'></i> view profile"), user_path(current_user) %></li>
      <li><%= link_to raw("<i class='icon-circle-arrow-left'></i> logout"), logout_path %></li>
    </ul>
  </div>
  <div class="nav_item pull-right">
    <p class="navbar-text">Logged in as:</p>
  </div>  
<% else %>
  <div class="nav_item pull-right">s
    <%= link_to 'register', register_path, class: 'btn btn-success' %>
  </div>
  <div class="nav_item pull-right">
    <%= link_to 'login', login_path, class: 'btn btn-primary' %>
  </div>
<% end %>
